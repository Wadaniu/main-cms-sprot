{extend name="common/base"/}
{block name="body"}
<?php $type=hotlive('live','直播'); ?>
<div class="subnav">
    <ul>
        {volist name="type" id="item" length='4'}
        <li><a href="{$item.src}">{$item.title}</a></li>
        {/volist}
        <li class="btn"><span><i class="iconfont icon-xia"></i></span></li>
        {volist name="type" id="item" offset='5' length='6'}
        <li><a href="{$item.src}">{$item.title}</a></li>
        {/volist}
    </ul>
</div>
<div class="container">
    <div class="model live-list">
        <div class="title">
            <div class="tit"><i class="iconfont icon-zhibo"></i><span>热门直播</span></div>
            <div class="right-btn showsel"><i class="iconfont icon-shaixuan"></i><span>筛选</span></div>
        </div>
        <div class="moresel">
            <ul>
                <li>
                    <?php $zuqiu=getFootballHotComp(); ?>
                    足球：{foreach $zuqiu as $item}<a href="/live-{$item.sphere_type}/{$item.short_name_py}">{$item.short_name_zh}</a>{/foreach}
                </li>
                <li><?php $lanqiu=getBasketballHotComp(); ?>
                    篮球：{foreach $lanqiu as $item}<a href="/live-{$item.sphere_type}/{$item.short_name_py}">{$item.short_name_zh}</a>{/foreach}
            </ul>
            <p class="close"><i class="iconfont icon-close"></i></p>
        </div>
        <div class="category">
            <a>全部</a>
            <a>直播中</a>
            <a>未开赛</a>
            <a>已完结</a>
        </div>
        <div class="play-list nodata">
            {foreach $data as $key=>$item}
            <p class="play-date">{$key}</p>
            <?php $formatdata=formatList($item);?>
            {foreach $formatdata as $key=>$category}
            <dl class="list-cont sp">
                {foreach $category as $i=>$team}
                <dd>
                    <a class="middle-container" href="/live-{$team.sphere_type}/{$team.comp_py}/{$team.id}.html">
                        <div class="team">
                            <img src="{$team.home_team_logo}">
                            <div class="name">{$team.home_team_text}</div>
                        </div>
                        <div class="info">
                            {$team.match_time|date='H:i'}
                            <div class="score">{$team.sphere_type=='zuqiu'?$team.home_scores[0]:getScore($team.home_scores)} : {$team.sphere_type=='zuqiu'?$team.away_scores[0]:getScore($team.away_scores)}</div>
                            {$team.competition_text}
                        </div>
                        <div class="team">
                            <img src="{$team.away_team_logo}">
                            <div class="name">{$team.away_team_text}</div>
                        </div>
                        <div class="btn"><?php echo getzt($team['status_id'],1,$team['sphere_type']) ?></div>
                    </a>
                </dd>
                {/foreach}
            </dl>
            {/foreach}
            {/foreach}
        </div>
    </div>
    <div class="model collect">
        <div class="title">
            <div class="tit"><i class="iconfont icon-zuqiu"></i><span>足球</span></div>
        </div>
        <div class="category">
            <a class="cur">录像</a>
            <a class="">集锦</a>
            <a class="">资讯</a>
        </div>
        <div class="list">
            <ul class="cur">
                <?php  $zuqiuLx = getLuxiangJijin(2,0);  ?>
                {foreach $zuqiuLx.data as $row}
                <li><a href="/luxiang-zuqiu/{$row.short_name_py}/{$row.id}.html">{$row.title}</a></li>
                {/foreach}
            </ul>
            <ul>
                <?php  $zuqiuJj = getLuxiangJijin(1,0);  ?>
                {foreach $zuqiuJj.data as $row}
                <li><a href="/jijin-zuqiu/{$row.short_name_py}/{$row.id}.html">{$row.title}</a></li>
                {/foreach}
            </ul>
            <ul>
                <?php  $zuqiuZx = getZiXun(1);  ?>
                {foreach $zuqiuZx as $row}
                <li><a href="/zixun-zuqiu/{$row.id}.html">{$row.title}</a></li>
                {/foreach}
            </ul>
        </div>
    </div>
    <div class="model collect">
        <div class="title">
            <div class="tit"><i class="iconfont icon-lanqiu"></i><span>篮球</span></div>
        </div>
        <div class="category">
            <a class="cur">录像</a>
            <a class="">集锦</a>
            <a class="">资讯</a>
        </div>
        <div class="list">
            <ul class="cur">
                <?php  $zuqiuLx = getLuxiangJijin(2,1);  ?>
                {foreach $zuqiuLx.data as $row}
                <li><a href="/luxiang-lanqiu/{$row.short_name_py}/{$row.id}.html">{$row.title}</a></li>
                {/foreach}
            </ul>
            <ul>
                <?php  $zuqiuJj = getLuxiangJijin(1,1);  ?>
                {foreach $zuqiuJj.data as $row}
                <li><a href="/jijin-lanqiu/{$row.short_name_py}/{$row.id}.html">{$row.title}</a></li>
                {/foreach}
            </ul>
            <ul>
                <?php  $zuqiuZx = getZiXun(2);  ?>
                {foreach $zuqiuZx as $row}
                <li><a href="/zixun-lanqiu/{$row.id}.html">{$row.title}</a></li>
                {/foreach}
            </ul>
        </div>
    </div>
    {include file="assembly/saishi"/}
    {include file="assembly/team"/}
    {include file="assembly/hotkey"/}
</div>
{/block}
{block name="script"}
<script>
    $(".btn").click(function () {
        $(this).parent().toggleClass("open");
    });
    $(".showsel").click(function () {
        $(".moresel").fadeIn(300);
        $("body").css("overflow","hidden");
    });
    $(".moresel .close").click(function () {
        $(".moresel").fadeOut(300);
        $("body").css("overflow","");
    });
    $(".collect .category a").click(function () {
        $(this).addClass('cur').siblings().removeClass('cur');
        let parents = $(this).parents('.collect');
        $(parents).find("ul").removeClass('cur').eq($(this).index()).addClass('cur')
    })

    $(".live-list .category a").click(function () {
        $(this).addClass('cur').siblings().removeClass();
        switch ($(this).index()) {
            case 0:
                $(".list-cont").removeClass('cur')
                if ($(".list-cont").eq(1).find('.nodata').length == 0) {
                    $(".list-cont").eq(1).addClass('cur')
                }
                if ($(".list-cont").eq(2).find('.nodata').length == 0) {
                    $(".list-cont").eq(2).addClass('cur')
                }
                break;
            case 1:
                $(".list-cont").removeClass('cur').eq(1).addClass('cur')
                break;
            case 2:
                $(".list-cont").removeClass('cur').eq(2).addClass('cur')
                break;
            case 3:
                $(".list-cont").removeClass('cur').eq(0).addClass('cur')
                break;
        }
    })

    $(".list-cont").each(function (i, item) {
        if ($(item).children().length == 0) {
            $(item).append(`<p class='nodata sp'>暂无相关数据</p>`)
        }
        $(".live-list .category a").eq(0).trigger('click')
    })
</script>
{/block}